#include <iostream>
#include <filesystem>

#include <dubu_pack/dubu_pack.h>

constexpr char* DubuPackLogo = R"(
__/\\\\\\\\\\\\_____/\\\________/\\\__/\\\\\\\\\\\\\____/\\\________/\\\_        
 _\/\\\////////\\\__\/\\\_______\/\\\_\/\\\/////////\\\_\/\\\_______\/\\\_       
  _\/\\\______\//\\\_\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\_______\/\\\_      
   _\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\\\\\\\\\\\\__\/\\\_______\/\\\_     
    _\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\/////////\\\_\/\\\_______\/\\\_    
     _\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\_______\/\\\_   
      _\/\\\_______/\\\__\//\\\______/\\\__\/\\\_______\/\\\_\//\\\______/\\\__  
       _\/\\\\\\\\\\\\/____\///\\\\\\\\\/___\/\\\\\\\\\\\\\/___\///\\\\\\\\\/___ 
        _\////////////________\/////////_____\/////////////_______\/////////_____
         __/\\\\\\\\\\\\\_______/\\\\\\\\\___________/\\\\\\\\\__/\\\________/\\\_        
          _\/\\\/////////\\\___/\\\\\\\\\\\\\______/\\\////////__\/\\\_____/\\\//__       
           _\/\\\_______\/\\\__/\\\/////////\\\___/\\\/___________\/\\\__/\\\//_____      
            _\/\\\\\\\\\\\\\/__\/\\\_______\/\\\__/\\\_____________\/\\\\\\//\\\_____     
             _\/\\\/////////____\/\\\\\\\\\\\\\\\_\/\\\_____________\/\\\//_\//\\\____    
              _\/\\\_____________\/\\\/////////\\\_\//\\\____________\/\\\____\//\\\___   
               _\/\\\_____________\/\\\_______\/\\\__\///\\\__________\/\\\_____\//\\\__  
                _\/\\\_____________\/\\\_______\/\\\____\////\\\\\\\\\_\/\\\______\//\\\_ 
                 _\///______________\///________\///________\/////////__\///________\///__
)";

int main(int argc, char** argv) {
	std::cout << DubuPackLogo << std::endl;

	for (int i = 1; i < argc; ++i) {
        std::string packagePath = argv[i];

        if (!std::filesystem::is_directory(packagePath)) {
			std::cerr << "Invalid directory path: " << packagePath << std::endl;
        }

        std::cout << "Packing: " << packagePath << std::endl;
        dubu_pack::Packer packer(packagePath);
        packer.Pack();
	}

	return 0;
}